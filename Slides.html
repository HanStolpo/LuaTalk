<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Handré Stolp" />
  <title>Introduction to Lua the Extensible Extension Language</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
    href="http://www.w3.org/Talks/Tools/Slidy2/styles/slidy.css" />
  <script src="http://www.w3.org/Talks/Tools/Slidy2/scripts/slidy.js.gz"
    charset="utf-8" type="text/javascript"></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Introduction to Lua the Extensible Extension Language</h1>
  <p class="author">
Handré Stolp
  </p>
  <p class="date">8th April 2013</p>
</div>
<div class="section titleslide slide level1" id="introduction"><h1>Introduction</h1></div><div class="section slide level2" id="what-is-lua">
<h1>What is Lua</h1>
<ul class="incremental">
<li>It is an embeddable scripting language</li>
<li>It is dynamically typed</li>
<li>It runs on a register-based virtual machine</li>
<li>It has automatic memory management with incremental GC</li>
<li>It has simple procedural <em>C</em> and <em>Pascal</em> like syntax</li>
<li>It has good support for functional and declarative paradigms
<ul class="incremental">
<li>Functions are first class objects</li>
<li>Lexically scoped closures</li>
<li>Tail recursion</li>
</ul></li>
<li>Its is portable and minimalist
<ul class="incremental">
<li>Portable ANSI C</li>
<li>Does not come with batteries</li>
<li>Can squeeze runtime and standard libraries into</li>
</ul></li>
</ul>
</div>
<div class="section titleslide slide level1" id="the-language"><h1>The Language</h1></div><div class="section slide level2" id="comments">
<h1>Comments</h1>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="co">-- This is a single line comment</span>
<span class="co">--[[ This is a multiline </span>
<span class="co">     comment</span>
<span class="co">--]]</span>
<span class="co">--[=[ This is a multiline </span>
<span class="co">     comment</span>
<span class="co">    --[[ </span>
<span class="co">        With a nested multiline </span>
<span class="co">        comment</span>
<span class="co">    --]]</span>

<span class="co">    Any amount of `=` allowed the start and end count must just match</span>
<span class="co">--]=]</span></code></pre>
</div><div class="section slide level2" id="statements">
<h1>Statements</h1>
<ul class="incremental">
<li><p>Each line is a new statement and default scope is global</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="kw">a</span> <span class="ot">=</span> <span class="dv">1</span>       <span class="co">-- global variable </span>
<span class="kw">local</span> <span class="kw">b</span> <span class="ot">=</span> <span class="dv">2</span> <span class="co">-- prepend with &#39;local&#39; to bind to lexical scope</span></code></pre></li>
<li><p>Standard standard <em>C</em> and <em>Pascal</em> like binary operators</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="kw">e</span> <span class="ot">=</span> <span class="kw">a</span> <span class="ot">+</span> <span class="kw">b</span>       <span class="co">-- add</span>
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">a</span> <span class="ot">-</span> <span class="kw">b</span>       <span class="co">-- subtract</span>
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">a</span> <span class="ot">*</span> <span class="kw">b</span>       <span class="co">-- multiply</span>
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">a</span> % <span class="kw">b</span>       <span class="co">-- modulus</span>
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">a</span> <span class="ot">^</span> <span class="kw">b</span>       <span class="co">-- a to power b</span>
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">a</span> <span class="ot">==</span> <span class="kw">b</span>      <span class="co">-- equality</span>
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">a</span> <span class="ot">~=</span> <span class="kw">b</span>      <span class="co">-- inequality</span>
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">a</span> <span class="ot">&lt;</span> <span class="kw">b</span>       <span class="co">-- less than</span>
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">a</span> <span class="ot">&gt;</span> <span class="kw">b</span>       <span class="co">-- greater than</span>
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">a</span> <span class="ot">&lt;=</span> <span class="kw">b</span>      <span class="co">-- less than equal</span>
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">a</span> <span class="ot">&gt;=</span> <span class="kw">b</span><span class="ot">;</span>     <span class="co">-- greater than equal</span>
<span class="kw">e</span> <span class="ot">=</span> <span class="st">&quot;ss&quot;</span> <span class="ot">..</span> <span class="st">&quot;XX&quot;</span><span class="co">-- string concatenation</span></code></pre></li>
</ul>
</div><div class="section slide level2" id="statements-continued">
<h1>Statements continued</h1>
<ul class="incremental">
<li><p>Multiple assignment supported and multiple statements per line separated by <strong>;</strong></p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="kw">a</span><span class="ot">,</span> <span class="kw">b</span> <span class="ot">=</span> <span class="kw">b</span><span class="ot">,</span> <span class="kw">a</span>         <span class="co">-- this swaps the values of a and b</span>
<span class="kw">local</span> <span class="kw">c</span> <span class="ot">=</span> <span class="dv">3</span><span class="ot">;</span> <span class="kw">d</span> <span class="ot">=</span> <span class="dv">4</span><span class="ot">;</span> <span class="co">-- multiple statements per line</span>
<span class="co">-- define local variable e with no value bound to it</span>
<span class="kw">local</span> <span class="kw">e</span><span class="ot">;</span>            <span class="co">-- &#39;;&#39; not necessary but OK.</span></code></pre></li>
<li><p>Logical operators a bit different (<strong>nil</strong> and <strong>false</strong> is false everything else is true)</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="co">-- stops on false or nil , returns last evaluated value</span>
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">a</span> <span class="kw">and</span> <span class="kw">b</span>         <span class="co">-- if a true then b else false</span>
<span class="co">-- stops on true (not false or nil ), returns last evaluated value</span>
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">a</span> <span class="kw">or</span> <span class="kw">b</span>          <span class="co">-- if a true then a else b</span>
<span class="co">-- Logically invert </span>
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">not</span> <span class="kw">a</span>           <span class="co">-- if a true then true else false</span>
<span class="co">-- using and and or for conditional assignment</span>
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">IAmNotDefined</span> <span class="kw">or</span> <span class="st">&#39;So default value&#39;</span> 
<span class="kw">e</span> <span class="ot">=</span> <span class="kw">e</span> <span class="kw">and</span> <span class="kw">IAmNotDefinedButDoesntMatter</span></code></pre></li>
</ul>
</div><div class="section slide level2" id="types">
<h1>Types</h1>
<p>All values in Lua are <em>first-class</em> (stored in variables; passed as arguments; returned as results)</p>
<dl class="incremental">
<dt>nil</dt>
<dd>The bottom type signifying nothing
</dd>
<dt>boolean</dt>
<dd>The logical type can either be <code>true</code> or <code>false</code>.
</dd>
<dd><code>nil</code> and <code>false</code> counts as false everything else is true.
</dd>
<dt>number</dt>
<dd>The only arithmetic type.
</dd>
<dd>Runtime dependant usually <code>double</code> (could be <code>char</code>, <code>short</code>, <code>int</code>, <code>float</code>).
</dd>
<dt>string</dt>
<dd>Immutable array of 8-bit <code>char</code> values.
</dd>
<dd>8-bit clean i.e. may include embedded zeros <code>'\0'</code>
</dd>
</dl>
</div><div class="section slide level2" id="types-continued">
<h1>Types continued</h1>
<dl class="incremental">
<dt>function</dt>
<dd>Any function defined in <em>Lua</em>
</dd>
<dd>Any function defined in <em>C</em> and exposed to <em>Lua</em>
</dd>
<dd>Any compiled file or string of <em>Lua</em> statements
</dd>
<dt>thread</dt>
<dd>Represents independent thread of execution.
</dd>
<dd>Not <em>OS</em> threads used for coroutines
</dd>
<dt>userdata</dt>
<dd>Arbitrary <em>C</em> data to be stored in <em>Lua</em>
</dd>
<dd>Only operations are assignment and identity test
</dd>
<dt>table</dt>
<dd>The only data structure in <em>Lua</em>
</dd>
<dd>Associative arrays
</dd>
<dd>Heterogeneous in value and key (any type except <code>nil</code>)
</dd>
</dl>
</div><div class="section slide level2" id="strings">
<h1>Strings</h1>
<ul class="incremental">
<li>Escaped strings
<ul class="incremental">
<li><code>'Some\n &quot;blah&quot; string'</code></li>
<li><code>&quot;Some\n 'blah' string&quot;</code></li>
</ul></li>
</ul>
</div><div class="section slide level2" id="control-structures">
<h1>Control structures</h1>
<dl class="incremental">
<dt>do block end</dt>
<dd><p>Introduces local scope</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="kw">do</span>
    <span class="kw">local</span> <span class="kw">onlyVisibleHere</span> <span class="ot">=</span> <span class="dv">5</span>
<span class="kw">end</span></code></pre>
</dd>
<dt>if then else</dt>
<dd><p>Conditional branching with each branch introducing a local scope.</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="kw">if</span> <span class="kw">a</span> <span class="ot">==</span> <span class="kw">b</span> <span class="kw">then</span>      <span class="co">-- start if branch</span>
    <span class="kw">e</span> <span class="ot">=</span> <span class="dv">2</span>
<span class="kw">elseif</span> <span class="kw">a</span> <span class="ot">==</span> <span class="kw">c</span> <span class="kw">then</span>  <span class="co">-- optional else if branch</span>
    <span class="kw">e</span> <span class="ot">=</span> <span class="dv">3</span> 
<span class="kw">else</span>                <span class="co">-- optional else branch</span>
    <span class="kw">e</span> <span class="ot">=</span> <span class="dv">4</span>
<span class="kw">end</span>                 <span class="co">-- required terminator</span></code></pre>
</dd>
</dl>
</div><div class="section slide level2" id="control-structures-continued">
<h1>Control structures continued</h1>
<dl class="incremental">
<dt>while</dt>
<dd><p>If condition is true then repeatedly execute block until false</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="kw">local</span> <span class="kw">a</span><span class="ot">,</span><span class="kw">b</span> <span class="ot">=</span> <span class="dv">1</span><span class="ot">,</span><span class="dv">5</span>
<span class="kw">while</span> <span class="kw">a</span> <span class="ot">&lt;</span> <span class="kw">b</span> <span class="kw">do</span>
    <span class="kw">a</span> <span class="ot">=</span> <span class="kw">a</span> <span class="ot">+</span> <span class="dv">1</span>       <span class="co">-- executes 4 times</span>
<span class="kw">end</span></code></pre>
</dd>
<dt>repeat</dt>
<dd><p>Execute block and if condition is true repeat until false</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="kw">local</span> <span class="kw">a</span><span class="ot">,</span><span class="kw">b</span> <span class="ot">=</span> <span class="dv">4</span><span class="ot">,</span><span class="dv">5</span>
<span class="kw">repeat</span>
   <span class="kw">a</span> <span class="ot">=</span> <span class="kw">a</span> <span class="ot">+</span> <span class="dv">1</span>        <span class="co">-- executes 2 times</span>
<span class="kw">until</span> <span class="kw">a</span> <span class="ot">==</span> <span class="kw">b</span></code></pre>
</dd>
<dt>break</dt>
<dd><p>Forces enclosing looping structure to terminate immediately</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="kw">local</span> <span class="kw">a</span> <span class="ot">=</span> <span class="dv">1</span>
<span class="kw">while</span> <span class="kw">true</span> <span class="kw">do</span>
    <span class="kw">break</span>
    <span class="kw">a</span> <span class="ot">=</span> <span class="kw">a</span> <span class="ot">+</span> <span class="dv">1</span>       <span class="co">-- never executes a remains 1</span>
<span class="kw">end</span></code></pre>
</dd>
</dl>
</div><div class="section slide level2" id="control-structures-continued-1">
<h1>Control structures continued</h1>
<dl class="incremental">
<dt>numerical for</dt>
<dd><p>Repeat the block until initial value passes limit incrementing by optional step size. Default step size is 1.</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="kw">local</span> <span class="kw">a</span> <span class="ot">=</span> <span class="dv">1</span>
<span class="kw">for</span> <span class="kw">u</span><span class="ot">=</span><span class="dv">1</span><span class="ot">,</span><span class="dv">10</span> <span class="kw">do</span>
    <span class="kw">a</span> <span class="ot">=</span> <span class="kw">u</span>       <span class="co">-- executes 10 times (at end a == 10)</span>
<span class="kw">end</span>
<span class="kw">for</span> <span class="kw">u</span><span class="ot">=</span><span class="dv">10</span><span class="ot">,</span><span class="dv">1</span><span class="ot">,-</span><span class="dv">1</span> <span class="kw">do</span>
    <span class="kw">a</span> <span class="ot">=</span> <span class="kw">u</span>       <span class="co">-- executes 10 times (at end a == 1)</span>
<span class="kw">end</span></code></pre>
</dd>
<dt>generic for</dt>
<dd><p>The generic for loop works over functions called iterators. On each iteration, the iterator function is called to produce a new value, stopping when this new value is nil.</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="kw">local</span> <span class="kw">a</span> <span class="ot">=</span> <span class="dv">1</span>
<span class="kw">for</span> <span class="kw">k</span><span class="ot">,</span><span class="kw">v</span> <span class="kw">in</span> <span class="fu">ipairs</span> <span class="ot">{</span><span class="dv">0</span><span class="ot">,</span><span class="dv">1</span><span class="ot">,</span><span class="dv">2</span><span class="ot">,</span><span class="dv">3</span><span class="ot">,</span><span class="dv">4</span><span class="ot">,</span><span class="dv">5</span><span class="ot">,</span><span class="dv">6</span><span class="ot">,</span><span class="dv">7</span><span class="ot">,</span><span class="dv">8</span><span class="ot">,</span><span class="dv">9</span><span class="ot">}</span> <span class="kw">do</span>
    <span class="kw">a</span> <span class="ot">=</span> <span class="kw">k</span> <span class="ot">+</span> <span class="kw">v</span>       <span class="co">-- executes 10 times (at end a == 10 + 9)</span>
<span class="kw">end</span></code></pre>
</dd>
</dl>
</div>
</body>
</html>
